* Code map

 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            | Client                                      | Client & Server      | Server                                                                                              |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 | Contract   |                                             |                      |                                                                                                     |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            | API                                         | API                  | API                                                                                                 |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            |                                             |                      |                                                                                                     |            |
 |            | notifications.client :≡ ø → api             |                      | notifications.server :≡ users path collections → api                                                |            |
 |            | ..api :≡ {                                  |                      | ..users : Mongo.Collection                                                                          |            |
 |            | ....observe :≡ [tracker] → ø                |                      | ..path :≡ string representing a path in user object ending with `trackers`                          |            |
 |            | ......subscribe('notifications', [tracker]) |                      | ..collections : { String: { c: Mongo.Collection, p: Pattern, must include a `version:String` }, _ } |            |
 |            | ....track                                   |                      | ..api :≡ {                                                                                          |            |
 |            | ..}                                         |                      |                                                                                                     |            |
 |            |                                             |                      | ....publish :≡ ø → ø                                                                                |            |
 |            |                                             |                      | ......publish 'notifications' : trackers → ø                                                        |            |
 |            |                                             |                      | ........∃ u ∈ users, u.subscribe(u[path]), ∀ t ∈ u[path]:                                           |            |
 |            |                                             |                      | ..........if ∃ o ∈ collections[t.collection], o._id = t.id:                                         |            |
 |            |                                             |                      | ............o deleted => delete t ∈ user[path]                                                      |            |
 |            |                                             |                      | ............o updated => update t                                                                   |            |
 |            |                                             |                      | ..........else: delete t ∈ user[path]                                                               |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      | ....track :≡ userId collection id version → ø                                                       |            |
 |            |                                             |                      | ......collection ∈ keys(collections)                                                                |            |
 |            |                                             |                      | ......id : Mongo.ObjectID                                                                           |            |
 |            |                                             |                      | ......version matches versionPattern                                                                |            |
 |            |                                             |                      | ......∃ user[id=userId] ∈ users:                                                                    |            |
 |            |                                             |                      | ........if ∃ t[collection=collection id=id]: t.version = version                                    |            |
 |            |                                             |                      | ........else: push tracker :≡ { _id collection id version } to u[path]                              |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      | }                                                                                                   |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            | Guaranties                                  |                      | Guaranties                                                                                          |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      | ∃ u ∈ users, u called notifications.client().observe(u[path]):                                      |            |
 |            |                                             |                      | ..∀ t ∈ u[path]: ∃ o ∈ collections[t.collection], o.id = t.id, t.updated := (o.version = t.version) |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 | Internals  |                                             |                      |                                                                                                     |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            | Constants                                   |                      | Constants                                                                                           |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             | versionPattern       |                                                                                                     | (ref 15c7) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             | objectPattern        |                                                                                                     | (ref 582c) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             | trackedObjectPattern |                                                                                                     | (ref ad11) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             | trackersPattern      |                                                                                                     | (ref 035a) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             | users                |                                                                                                     | (ref 473a) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             | objects              |                                                                                                     | (ref a5cb) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             | collections          |                                                                                                     | (ref 8b65) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      | isTrackerUpdated                                                                                    | (ref e8d3) |
 |            |                                             |                      |                                                                                                     |            |
 | (ref 3198) |                                             | notifications        |                                                                                                     | (ref 36a5) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |            | addTracker                                  |                      | addTracker : tracker callback → ø                                                                   | (ref ac42) |
 |            |                                             |                      | ..callback :≡ err success:Boolean → ø                                                               |            |
 |            |                                             |                      |                                                                                                     |            |
 |            | readTracker                                 |                      | readTracker : trackerId version callback → ø                                                        | (ref f0e7) |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            | Variables                                   |                      | Variables                                                                                           |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |            |                                             |                      |                                                                                                     |            |
 |------------+---------------------------------------------+----------------------+-----------------------------------------------------------------------------------------------------+------------|
